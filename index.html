<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0d2b08">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Samurice Dino Games â€” Phonics runner where you slash dinosaurs with the power of words!">
    <title>âš”ï¸ Samurice Dino Games</title>
    <link rel="stylesheet" href="css/style.css">

    <!-- ctx.roundRect polyfill for older browsers -->
    <script>
    (function() {
      const proto = CanvasRenderingContext2D.prototype;
      if (!proto.roundRect) {
        proto.roundRect = function(x, y, w, h, r) {
          if (typeof r === 'number') r = [r, r, r, r];
          const [tl=0, tr=0, br=0, bl=0] = Array.isArray(r) ? r : [r];
          this.beginPath();
          this.moveTo(x + tl, y);
          this.lineTo(x + w - tr, y);
          this.arcTo(x + w, y, x + w, y + tr, tr);
          this.lineTo(x + w, y + h - br);
          this.arcTo(x + w, y + h, x + w - br, y + h, br);
          this.lineTo(x + bl, y + h);
          this.arcTo(x, y + h, x, y + h - bl, bl);
          this.lineTo(x, y + tl);
          this.arcTo(x, y, x + tl, y, tl);
          this.closePath();
        };
      }
    })();
    </script>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODE CHOOSER  (external entry point â€” choose game type)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="modeChooser" class="screen active">
    <div class="mc-hero">
        <h1 class="mc-title">âš”ï¸ Samurice Dino Games</h1>
        <p class="mc-sub">Slash dinosaurs with the power of PHONICS!</p>
    </div>

    <div class="mc-buttons">
        <button class="mc-btn slash-btn" onclick="launchSlashGame()">
            <span class="mc-icon">âš”ï¸</span>
            <div class="mc-text">
                <span class="mc-name">Samurice Dino Slash</span>
                <span class="mc-desc">Endless runner + Phonics combat Â· NEW: Shop Â· Daily Â· Achievements!</span>
            </div>
        </button>

        <button class="mc-btn flap-btn" onclick="launchFlappyGame()">
            <span class="mc-icon">ğŸ¦•</span>
            <div class="mc-text">
                <span class="mc-name">Dino Dash</span>
                <span class="mc-desc">Flappy Bird style â€” how far can you go?</span>
            </div>
        </button>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SAMURICE DINO SLASH â€” Phonics auto-runner + battle game
     Canvas = all game rendering (title, runner, menus, etc.)
     #battleOverlay = interactive phoneme tiles (HTML, for touch)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="slashScreen" class="screen">
    <div id="slashWrapper">

        <!-- Main game canvas -->
        <canvas id="slashCanvas"></canvas>

        <!-- Rotate-device prompt â€” portrait only -->
        <div id="rotatePrompt" class="rotate-prompt">
            <div class="rotate-icon">ğŸ“±â¡ï¸ğŸ”„</div>
            <div class="rotate-text">Rotate your device for the best experience!</div>
        </div>

        <!-- Exit button -->
        <button id="slashExitBtn"
                class="slash-exit-btn"
                onclick="exitSlash()"
                title="Back to menu">âœ•</button>

        <!-- Fullscreen toggle -->
        <button id="slashFsBtn"
                class="slash-fs-btn game-fs-btn"
                onclick="toggleFullscreen()"
                title="Fullscreen">â›¶</button>

        <!-- Runner D-pad controls (touch only) -->
        <!-- In endless mode, left/right are hidden; only JUMP shown -->
        <div id="runnerControls" class="runner-controls hidden">
            <div class="dpad-move">
                <button class="dpad-btn" id="dpadLeft">â—€</button>
                <button class="dpad-btn" id="dpadRight">â–¶</button>
            </div>
            <button class="dpad-btn dpad-jump" id="dpadJump">â–²<br><span>JUMP</span></button>
        </div>

        <!-- Battle overlay: phoneme tiles + word builder.
             Populated by BattleEngine (campaign) or EndlessBattleEngine (endless).
             Class toggled between 'battle-overlay' (campaign) and
             'endless-battle-overlay' (endless mode) by JS. -->
        <div id="battleOverlay" class="battle-overlay"></div>

    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     DINO DASH â€” Flappy Bird Screen  (unchanged)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="flappyScreen" class="screen">
    <div id="flappyWrapper">

        <canvas id="flappyCanvas"></canvas>

        <button id="muteBtn"        class="fd-btn fd-mute flappy-overlay-btn">ğŸ”Š</button>
        <button id="flappyBackBtn"  class="fd-btn fd-back flappy-overlay-btn" onclick="exitFlappy()">âœ•</button>
        <button id="flappyFsBtn"    class="fd-btn fd-fs   flappy-overlay-btn game-fs-btn" onclick="toggleFullscreen()" title="Fullscreen">â›¶</button>

        <div id="skinPicker" class="fd-skin-picker">
            <button id="prevSkin" class="fd-skin-arrow flappy-overlay-btn">â—€</button>
            <span   id="skinName" class="fd-skin-name">Raptor</span>
            <button id="nextSkin" class="fd-skin-arrow flappy-overlay-btn">â–¶</button>
        </div>

        <div id="modeButtons" class="fd-mode-row">
            <button id="modeBtnClassic" class="fd-mode-btn fd-active flappy-overlay-btn">ğŸ² Classic</button>
            <button id="modeBtnDaily"   class="fd-mode-btn flappy-overlay-btn">ğŸ“… Daily</button>
        </div>

        <button id="shareBtn" class="fd-share-btn flappy-overlay-btn" style="display:none">
            ğŸ“¤ Share Score
        </button>

    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCRIPTS â€” load order matters
       1. phonicsData    â€“ word data, no dependencies
       2. progressTracker â€“ localStorage (shop, achievements, daily, endless)
       3. audioManager   â€“ Web Audio + TTS + chiptune music
       4. runnerEngine   â€“ campaign runner + EndlessRunnerEngine (appended)
       5. battleEngine   â€“ campaign boss battle + EndlessBattleEngine (appended)
       6. slashGame      â€“ main orchestrator; overrides launchSlashGame()
       7. game.js        â€“ Dino Dash (untouched)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script src="js/phonicsData.js"></script>
<script src="js/progressTracker.js"></script>
<script src="js/audioManager.js"></script>
<script src="js/runnerEngine.js"></script>
<script src="js/battleEngine.js"></script>
<script src="js/slashGame.js"></script>
<script src="js/game.js"></script>

<script>
// â”€â”€ Fullscreen toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleFullscreen() {
  const fsEl = document.fullscreenElement || document.webkitFullscreenElement;
  if (!fsEl) {
    const req = document.documentElement.requestFullscreen
             || document.documentElement.webkitRequestFullscreen;
    if (req) req.call(document.documentElement).catch(() => {});
  } else {
    const exit = document.exitFullscreen || document.webkitExitFullscreen;
    if (exit) exit.call(document).catch(() => {});
  }
}

function _syncFsIcons() {
  const inFs = !!(document.fullscreenElement || document.webkitFullscreenElement);
  document.querySelectorAll('.game-fs-btn').forEach(btn => {
    btn.textContent = inFs ? 'âŠ¡' : 'â›¶';
    btn.title = inFs ? 'Exit fullscreen' : 'Fullscreen';
  });
}
document.addEventListener('fullscreenchange',       _syncFsIcons);
document.addEventListener('webkitfullscreenchange', _syncFsIcons);

// â”€â”€ Prevent context menu on long-press (mobile) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('contextmenu', e => e.preventDefault());

// â”€â”€ Prevent double-tap zoom on game elements â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let lastTap = 0;
document.addEventListener('touchend', function(e) {
  const now = Date.now();
  if (now - lastTap < 300) e.preventDefault();
  lastTap = now;
}, { passive: false });
</script>

</body>
</html>
